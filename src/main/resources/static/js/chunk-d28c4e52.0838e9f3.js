(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d28c4e52"],{"169b":function(t,e,n){"use strict";var s=n("5a4d"),a=n.n(s);a.a},"3ad6":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-container"},[n("div",{staticClass:"left"},[n("div",{staticClass:"article-wrap"},[n("div",{staticClass:"article-header"},[n("h4",{staticClass:"article-title"},[t._v(t._s(t.article.articleTitle))]),n("p",{staticClass:"article-info"},[t._v("\n          作者:\n          "),n("a",[t._v(t._s(t.article.username))]),n("span",{staticClass:"time"},[t._v("最后发表于 "+t._s(t.article.publishDate))]),n("span",{staticClass:"read-count"},[t._v("阅读数 "+t._s(t.article.readCount))]),n("span",{staticClass:"collection",attrs:{title:"防止频繁点击,每次只能点击一次事件,刷新后才能继续点击"},on:{"~click":function(e){return t.handlerCollectFn(e)}}},[n("i",{class:{"el-icon-star-off":!t.collected,"el-icon-star-on":t.collected}}),t._v("\n            "+t._s(t.collected?"已收藏":"点击收藏")+"\n          ")])])]),n("el-divider"),n("article",{domProps:{innerHTML:t._s(t.article.articleContent)}}),n("el-divider"),n("div",{staticClass:"labels"},t._l(t.articleLabelComputed,(function(t,e){return n("ArticleLabel",{key:e,attrs:{name:t}})})),1),n("el-divider"),n("div",{staticClass:"reply"},[n("div",{staticClass:"reply-wrap"},[n("el-input",{attrs:{type:"textarea",maxlength:"200",autosize:{minRows:2,maxRows:6}},model:{value:t.comment1Content,callback:function(e){t.comment1Content=e},expression:"comment1Content"}}),n("p",[t.wordCount>0?n("span",[t._v("还能输入 "+t._s(t.wordCount)+" 个字符")]):n("span",{staticStyle:{color:"red"}},[t._v("字数已满,您不能再输入啦")]),n("el-button",{staticClass:"reply-btn",attrs:{type:"primary",size:"small"},on:{click:t.submitComment1}},[t._v("发表评论")])],1)],1)]),n("el-divider"),n("div",{staticClass:"comment"},[n("Comment",{attrs:{comment1Data:t.comment1Data,articleTitle:t.article.articleTitle},on:{submitComment2:t.submitComment2}}),n("el-pagination",{staticStyle:{"margin-top":"2em"},attrs:{background:"",layout:"total,prev, pager, next",total:t.comment1Data.total,"page-size":5,"current-page":t.current,"hide-on-single-page":0==t.comment1Data.total},on:{"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e},"current-change":t.currentChange}})],1)],1)]),n("div",{staticClass:"right"},[n("ZZWX"),n("RelatedArticle")],1)])},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("28a5"),n("bd86")),c=n("7665"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-container"},[n("h4",{staticClass:"comment-count"},[t._v(t._s(t.comment1Data.total)+" 个回复")]),n("div",{staticClass:"comment-wrap"},t._l(t.comment1List,(function(e,s){return n("div",{key:s,staticClass:"comment-level-1"},[n("p",{staticClass:"top"},[n("a",{staticClass:"user-info"},[n("el-avatar",{staticClass:"user-img",attrs:{shape:"square",size:"small",src:e.avatar}}),n("span",{staticClass:"user-name"},[t._v(t._s(e.username))]),n("span",{staticClass:"comment-date"},[t._v(t._s(e.commentDate))])],1),n("a",{staticClass:"dianzan"},[n("span",{staticClass:"reply"},[e.userId!=t.userInfo.id?n("a",{staticClass:"reply-btn",on:{click:function(n){return t.showReplyInput(e,s,e.userId)}}},[t._v("回复")]):t._e(),e.comment2List.length>=1?n("a",{staticClass:"readreply",on:{click:function(n){return t.showSubComment(e,s)}}},[t._v("查看回复( "+t._s(e.comment2List.length)+" )")]):t._e()]),n("i",{staticClass:"el-icon-apple",class:{active:e.compliment},on:{"~click":function(n){return t.addCompliment1(e,s)}}},[t._v(t._s(e.complimentCount))])])]),n("p",{staticClass:"comment-content"},[t._v(t._s(e.commentContent))]),n("el-collapse-transition",[1==e.flag1?n("div",{staticClass:"comment-level-2"},t._l(e.comment2List,(function(a,i){return n("div",{key:i,staticClass:"item"},[n("p",{staticClass:"top"},[n("a",{staticClass:"user-info"},[n("el-avatar",{staticClass:"user-img",attrs:{shape:"square",size:"small",src:a.fromAvatar}}),n("span",{staticClass:"user-name"},[t._v(t._s(a.fromUserName))]),n("span",{staticClass:"text"},[t._v("回复")]),n("span",{staticClass:"target-name"},[t._v(t._s(a.toUserName))]),n("span",{staticClass:"comment-date"},[t._v(t._s(a.commentDate))])],1),n("a",{staticClass:"dianzan"},[n("span",{staticClass:"reply"},[a.fromUserId!=t.userInfo.id?n("a",{staticClass:"reply-btn",on:{click:function(n){return t.showReplyInput(e,s,a.fromUserId)}}},[t._v("回复")]):t._e()]),n("i",{staticClass:"el-icon-apple",class:{active:a.compliment},on:{"~click":function(e){return t.addCompliment2(a,s,i)}}},[t._v(t._s(a.complimentCount))])])]),n("p",{staticClass:"comment-content"},[t._v(t._s(a.commentContent))])])})),0):t._e()]),n("el-collapse-transition",[1==e.flag?n("div",{staticClass:"input"},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(n){t.$set(e,"input",n)},expression:"item.input"}}),n("el-button",{staticClass:"btn",attrs:{type:"success"},on:{click:function(n){return t.submitComment2(e,s)}}},[t._v("评论")])],1):t._e()])],1)})),0)])},o=[],l=n("1549"),m=n("2f62"),u=n("88dc");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={props:["comment1Data","articleTitle"],data:function(){return{isShow:!0,input:"",comment1List:[],toUserId:0}},created:function(){this.comment1List=this.comment1Data.comment1List},computed:p({},Object(m["d"])({userInfo:function(t){return t.userInfo}})),watch:{comment1Data:function(t){this.comment1List=t.comment1List}},methods:{showReplyInput:function(t,e,n){this.userInfo.id?0==t.flag?(this.$set(this.comment1List[e],"flag",1),this.toUserId=n):this.$set(this.comment1List[e],"flag",0):this.$message("请先登录")},showSubComment:function(t,e){0==t.flag1?this.$set(this.comment1List[e],"flag1",1):this.$set(this.comment1List[e],"flag1",0)},submitComment2:function(t,e){var n=this;if(0!=t.input.length){var s={fromUserId:this.userInfo.id,toUserId:this.toUserId,parentCommentId:t.id,commentContent:t.input,commentDate:Object(u["a"])(new Date,"{y}-{m}-{d} {h}:{i}:{s}"),commentUserName:this.userInfo.username,articleTitle:this.articleTitle,articleId:this.$route.params.articleId};l["a"].post("/api/comment/addComment2",s).then((function(t){var s=t.data,a=s.code,i=s.message;1==a?(n.$set(n.comment1List[e],"input",""),n.$message.success(i),n.$emit("submitComment2")):n.$message.error(i)}))}else this.$message.warning("不能为空")},addCompliment1:function(t,e){var n=this;l["a"].post("/api/comment/addCompliment/".concat(1,"/",t.id)).then((function(s){var a=s.data,i=a.code,c=a.message;1==i?(n.$message.success(c),n.$set(n.comment1List[e],"compliment",!0),n.$set(n.comment1List[e],"complimentCount",++t.complimentCount)):n.$message.error(c)}))},addCompliment2:function(t,e,n){var s=this;l["a"].post("/api/comment/addCompliment/".concat(2,"/",t.id)).then((function(a){var i=a.data,c=i.code,r=i.message;1==c?(s.$message.success(r),s.$set(s.comment1List[e].comment2List[n],"compliment",!0),s.$set(s.comment1List[e].comment2List[n],"complimentCount",++t.complimentCount)):s.$message.error(r)}))}}},h=f,C=(n("169b"),n("2877")),v=Object(C["a"])(h,r,o,!1,null,"7890cfa5",null),g=v.exports,b=n("0eb3"),_=n("dc5f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"related-container"},[n("h4",[t._v("相关文章")]),n("ul",{staticClass:"article-list"},[0==t.articleList.length?n("p",[t._v("暂无相关文章")]):t._e(),t._l(t.articleList,(function(e,s){return n("li",{key:s},[n("el-link",{attrs:{href:"/article/"+e.id}},[t._v(t._s(e.articleTitle))])],1)}))],2)])},I=[],O={name:"",data:function(){return{articleList:[]}},created:function(){var t=this;l["a"].get("/api/article/findRelatedArticle/".concat(this.$route.params.articleId)).then((function(e){var n=e.data.articleList;t.articleList=n}))}},w=O,L=(n("9c1e"),Object(C["a"])(w,y,I,!1,null,"d0560f52",null)),$=L.exports;function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"",data:function(){return{article:{},articleId:this.$route.params.articleId,collected:!1,comment1Content:"",comment1Data:{},current:1}},components:{ArticleLabel:c["a"],Comment:g,ZZWX:b["a"],HotLabel:_["a"],RelatedArticle:$},created:function(){this.getArticleData(),this.findIsCollected(),this.getComment1List(1)},computed:D({articleLabelComputed:function(){var t=this.article.articleLabel||"";return t.split(",")}},Object(m["d"])({userInfo:function(t){return t.userInfo}}),{wordCount:function(){return 200-this.comment1Content.length}}),methods:{getArticleData:function(){var t=this;l["a"].get("/api/article/findArticleById?id=".concat(this.articleId)).then((function(e){var n=e.data.article;t.article=n})).catch((function(e){t.$router.push("/404")}))},findIsCollected:function(){var t=this;this.userInfo.id&&l["a"].get("/api/article/findIsCollected?userId=".concat(this.userInfo.id,"&articleId=").concat(this.articleId)).then((function(e){var n=e.data,s=n.code;n.message;1==s&&(t.collected=!0)}))},collectArticle:function(){var t=this;l["a"].post("/api/article/collectArticle",{userId:this.userInfo.id,articleId:this.articleId}).then((function(e){var n=e.data,s=n.code,a=n.message;1==s?(t.collected=!0,t.$message.success(a)):t.$message.error(a)}))},cancelCollectArticle:function(){var t=this;l["a"].post("/api/article/cancelCollectArticle",{userId:this.userInfo.id,articleId:this.articleId}).then((function(e){var n=e.data,s=n.code,a=n.message;1==s?(t.collected=!1,t.$message.success(a)):t.$message.error(a)}))},handlerCollectFn:function(){this.userInfo.id?this.collected?this.cancelCollectArticle():this.collectArticle():this.$message("请先登陆")},submitComment1:function(){var t=this;if(this.userInfo.id)if(0!=this.comment1Content.length){var e={userId:this.userInfo.id,articleId:this.articleId,commentContent:this.comment1Content,commentDate:Object(u["a"])(new Date,"{y}-{m}-{d} {h}:{i}:{s}"),commentUserName:this.userInfo.username,articleTitle:this.article.articleTitle,toUserId:this.article.userId};l["a"].post("/api/comment/addComment1",e).then((function(e){var n=e.data,s=n.code,a=n.message;1==s?(t.$message.success(a),t.comment1Content="",t.getComment1List(t.current)):t.$message.error(a)}))}else this.$message.warning("请输入回复内容");else this.$message("请先登录")},getComment1List:function(t){var e=this;l["a"].get("/api/comment/comment1List?articleId=".concat(this.articleId,"&current=").concat(t,"&size=5")).then((function(t){e.comment1Data=t.data}))},currentChange:function(t){this.getComment1List(t)},submitComment2:function(){this.getComment1List(this.current)}}},P=k,A=(n("3ad7"),Object(C["a"])(P,s,a,!1,null,"5f24d5e4",null));e["default"]=A.exports},"3ad7":function(t,e,n){"use strict";var s=n("9bc0"),a=n.n(s);a.a},"5a4d":function(t,e,n){},"5d58":function(t,e,n){t.exports=n("d8d6")},"67bb":function(t,e,n){t.exports=n("f921")},"88dc":function(t,e,n){"use strict";n("a481");var s=n("5d58"),a=n.n(s),i=n("67bb"),c=n.n(i);function r(t){return r="function"===typeof c.a&&"symbol"===typeof a.a?function(t){return typeof t}:function(t){return t&&"function"===typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":typeof t},r(t)}function o(t,e){if(0===arguments.length)return null;10===(t+"").length&&(t=1e3*+t);var n,s=e||"{y}-{m}-{d} {h}:{i}:{s}";n="object"===r(t)?t:new Date(t);var a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},i=s.replace(/{(y|m|d|h|i|s|a)+}/g,(function(t,e){var n=a[e];return"a"===e?["一","二","三","四","五","六","日"][n-1]:(t.length>0&&n<10&&(n="0"+n),n||0)}));return i}e["a"]=o},"9bc0":function(t,e,n){},"9c1e":function(t,e,n){"use strict";var s=n("e265"),a=n.n(s);a.a},e265:function(t,e,n){}}]);
//# sourceMappingURL=chunk-d28c4e52.0838e9f3.js.map